<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Superman - Azure Architecture to Infrastructure Code</title>
    
    <!-- Compact Black & White Stylesheet -->
    <link href="{{ url_for('static', filename='css/compact-bw.css') }}" rel="stylesheet">
    
    <!-- Google Fonts - Optimized Loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    
    <!-- Meta Tags -->
    <meta name="description" content="Transform Azure architecture diagrams into production-ready Bicep templates and DevOps pipelines using AI">
    <meta name="theme-color" content="#000000">
</head>
<body>
    <!-- Compact Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="brand">
                    <i class="fas fa-bolt"></i>
                    <h1>Digital Superman</h1>
                </div>
                <p class="tagline">Azure Architecture to Infrastructure Code</p>
            </div>
        </div>
    </header>

    <!-- Main Container - Everything in One Page -->
    <main class="main-container">
        <div class="container">
            <!-- Compact Grid Layout -->
            <div class="main-grid">
                
                <!-- Left Column: Upload & Controls -->
                <div class="upload-column">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <h2>Upload Architecture</h2>
                        </div>
                        
                        <form id="uploadForm" enctype="multipart/form-data">
                            <!-- Environment Selection -->
                            <div class="form-group">
                                <label for="environment">
                                    <i class="fas fa-layer-group"></i>
                                    Environment
                                </label>
                                <select id="environment" name="environment" required>
                                    <option value="">Select environment...</option>
                                    <option value="development">Development</option>
                                    <option value="staging">Staging</option>
                                    <option value="production">Production</option>
                                </select>
                            </div>
                            
                            <!-- Processing Mode -->
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="fastMode" name="fast_mode">
                                    <span class="checkmark"></span>
                                    Fast Mode (15s vs 60s)
                                </label>
                            </div>
                            
                            <!-- File Upload -->
                            <div class="upload-zone" id="uploadZone">
                                <input type="file" id="fileInput" name="file" 
                                       accept=".png,.jpg,.jpeg,.pdf,.xml,.drawio,.vsdx,.svg">
                                <div class="upload-content">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p><strong>Drop file here</strong> or click to browse</p>
                                    <small>PNG, JPG, PDF, XML, Draw.io, VSDX, SVG â€¢ Max 16MB</small>
                                </div>
                            </div>

                            <!-- File Preview -->
                            <div class="file-preview" id="filePreview" style="display: none;">
                                <div class="file-info">
                                    <i class="fas fa-file-alt"></i>
                                    <div>
                                        <span class="file-name" id="fileName">filename.png</span>
                                        <span class="file-size" id="fileSize">1.2 MB</span>
                                    </div>
                                    <button type="button" class="remove-btn" id="removeFile">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Submit Button -->
                            <button type="submit" class="btn-primary" id="submitBtn" style="display: none;">
                                <i class="fas fa-rocket"></i>
                                Start Processing
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Right Column: AI Agents -->
                <div class="agents-column">
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-robot"></i>
                            <h2>AI Processing Pipeline</h2>
                        </div>
                        
                        <div class="agents-list">
                            <!-- Agent 1 -->
                            <div class="agent-item" id="agent1">
                                <div class="agent-header">
                                    <div class="agent-icon">
                                        <i class="fas fa-search-plus"></i>
                                    </div>
                                    <div class="agent-info">
                                        <h3>Architecture Analyzer</h3>
                                        <p>Analyzes diagrams and identifies Azure services</p>
                                    </div>
                                    <div class="agent-status waiting" id="agent1Status">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="agent1Progress"></div>
                                </div>
                            </div>

                            <!-- Agent 2 -->
                            <div class="agent-item" id="agent2">
                                <div class="agent-header">
                                    <div class="agent-icon">
                                        <i class="fas fa-shield-check"></i>
                                    </div>
                                    <div class="agent-info">
                                        <h3>Policy Checker</h3>
                                        <p>Validates against Azure policies and compliance</p>
                                    </div>
                                    <div class="agent-status waiting" id="agent2Status">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="agent2Progress"></div>
                                </div>
                            </div>

                            <!-- Agent 3 -->
                            <div class="agent-item" id="agent3">
                                <div class="agent-header">
                                    <div class="agent-icon">
                                        <i class="fas fa-code"></i>
                                    </div>
                                    <div class="agent-info">
                                        <h3>Bicep Generator</h3>
                                        <p>Generates Bicep templates and DevOps pipelines</p>
                                    </div>
                                    <div class="agent-status waiting" id="agent3Status">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="agent3Progress"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Overall Progress (Shows when processing) -->
            <div class="progress-section" id="progressSection" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-cogs"></i>
                        <h2>Processing Architecture</h2>
                    </div>
                    <div class="overall-progress">
                        <div class="progress-bar large">
                            <div class="progress-fill" id="overallProgress"></div>
                        </div>
                        <div class="progress-info">
                            <span class="progress-percentage" id="overallPercentage">0%</span>
                            <span class="progress-eta" id="progressETA">Estimating time...</span>
                        </div>
                    </div>
                    <div class="status-message" id="progressStatus">Initializing analysis...</div>
                </div>
            </div>

            <!-- Results (Shows when complete) -->
            <div class="results-section" id="resultsSection" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-check-circle"></i>
                        <h2>Analysis Complete</h2>
                    </div>
                    <div class="results-content">
                        <div class="results-grid">
                            <div class="result-item">
                                <i class="fas fa-file-code"></i>
                                <span>Bicep Templates</span>
                            </div>
                            <div class="result-item">
                                <i class="fas fa-cog"></i>
                                <span>DevOps Pipelines</span>
                            </div>
                            <div class="result-item">
                                <i class="fas fa-book"></i>
                                <span>Documentation</span>
                            </div>
                        </div>
                        <div class="results-actions">
                            <button class="btn-success" id="downloadBtn" style="display: none;">
                                <i class="fas fa-download"></i>
                                Download Package
                            </button>
                            <button class="btn-secondary" id="newAnalysisBtn">
                                <i class="fas fa-plus"></i>
                                New Analysis
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Compact JavaScript -->
    <script src="{{ url_for('static', filename='js/compact-app.js') }}"></script>
</body>
</html>
